{% extends "base.twig" %}

{% block content %}
  <h1>Liikmed</h1>
    {# Edited using this: https://bootstrap-table.com/docs/getting-started/usage/ #}
    {% include "components/feedback-email.twig" %}
    <table 
    data-toggle="table" 
    data-search="true"
    class="users-table">
      <thead>
        <tr> 
          {% if canSendGroupEmails %}
              <th>E-mail</th>
          {% endif %}
          <th>Pilt</th>
          <th>Liikme nimi</th>
          {% if isABookie or  choirBoss %}
              <th>Isikukood</th>
          {% endif %}
          <th  data-sortable="true">Häälerühm</th>
          <th  data-sortable="true">Tiitel</th>
          <th>Telefoni number</th>
          <th>Email</th>
          <th data-sortable="true">Sünnipäev</th>
          <th  data-sortable="true">Amet naiskooris</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr>
          {% if canSendGroupEmails %}
              <th>
                <input type="checkbox" value="{{ user.user_email }}" class="sendEmailsTo">
              </th>
          {% endif %}
          <td>
            <img src="{{ function('get_avatar_url', user.ID) }}">
          </td>
          <td>{{user.display_name}}</td>
          {% if isABookie or  choirBoss %}
          <td>{{ user.Personal_ID }}</td>
          {% endif %}
          <td>{{ user.vocal-range }}</td>
          <td>{{ user.choir_title }}</td>
          <td>{{ user.phone_number }}</td>
          <td>{{ user.user_email }}</td>
          <td>
           {{ function('calculateBirthday', user.Personal_ID )}}
          </td>
          <td>
            {{ function('returnUserRoles', user.roles)}}
          </td>
          <td>
            
            {% include "components/userinfo.twig"  %}
          </td>
        </tr>

        {% endfor %}
      </tbody>
    </table>
    {% if canSendGroupEmails %}
      {% include "components/group-email.twig" %}
    {% endif %}
  
 {% endblock %}